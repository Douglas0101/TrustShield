 Compreendi. A anÃ¡lise do log de erro mais recente, name 'MLflowObserver' is not defined, indica que a remoÃ§Ã£o da classe MLflowObserver nÃ£o foi acompanhada pela remoÃ§Ã£o da sua instanciaÃ§Ã£o no cÃ³digo.

  No entanto, este erro Ã© um sintoma de um problema mais profundo e recorrente relacionado a uma condiÃ§Ã£o de corrida (race condition) na forma como o modelo estÃ¡ sendo registrado no MLflow. Para resolver a
  causa raiz e evitar futuros erros, vou implementar uma correÃ§Ã£o mais robusta e definitiva.

  Plano de CorreÃ§Ã£o:

   1. RefatoraÃ§Ã£o do Registro no MLflow: Vou remover completamente o padrÃ£o de design Observer para o registro no MLflow, que se mostrou instÃ¡vel. Em vez disso, vou integrar a lÃ³gica de registro do modelo e
      seus artefatos (como o scaler) diretamente na funÃ§Ã£o de treinamento principal (_train_and_log_model), utilizando as funÃ§Ãµes padrÃ£o do MLflow (mlflow.sklearn.log_model). Isso garante que o modelo e seus
      artefatos sejam salvos e registrados de forma sÃ­ncrona e atÃ´mica, eliminando a condiÃ§Ã£o de corrida.
   2. RemoÃ§Ã£o de CÃ³digo Legado: O mÃ©todo _save_artifact, que salvava o modelo manualmente, se tornarÃ¡ obsoleto com a nova abordagem e serÃ¡ removido.

  Esta abordagem Ã© mais alinhada com as prÃ¡ticas recomendadas do MLflow e garantirÃ¡ a estabilidade do pipeline.

  Vou comeÃ§ar aplicando a refatoraÃ§Ã£o no mÃ©todo _train_and_log_model.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Edit src/models/train_fraud_model.py:     def _train_and_log_model(s... =>     def _train_and_log_model(s...                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    342   })                                                                                                                                                                                         â”‚
 â”‚    343   strategy = ModelTrainerFactory.create_strategy(model_type, self.config)                                                                                                                    â”‚
 â”‚    344                                                                                                                                                                                              â”‚
 â”‚    345 - # ATUALIZAÃ‡ÃƒO: Recebe o modelo E o scaler da estratÃ©gia.                                                                                                                                   â”‚
 â”‚    345   train_start = time.time()                                                                                                                                                                  â”‚
 â”‚    346   model, scaler = strategy.train(X_train)                                                                                                                                                    â”‚
 â”‚    347   training_time = time.time() - train_start                                                                                                                                                  â”‚
 â”‚    348   self.notify(TrainingEvent.TRAINING_COMPLETE, {"model_type": model_type, "training_time": training_time})                                                                                   â”‚
 â”‚    349                                                                                                                                                                                              â”‚
 â”‚    351 - # ATUALIZAÃ‡ÃƒO: Passa o scaler para a validaÃ§Ã£o.                                                                                                                                            â”‚
 â”‚    350   metrics = strategy.validate(model, scaler, X_test)                                                                                                                                         â”‚
 â”‚    351   metrics.training_time = training_time                                                                                                                                                      â”‚
 â”‚    352   self.notify(TrainingEvent.MODEL_VALIDATED, {"metrics": metrics})                                                                                                                           â”‚
 â”‚    353                                                                                                                                                                                              â”‚
 â”‚    356 - # ATUALIZAÃ‡ÃƒO: Salva o artefato completo.                                                                                                                                                  â”‚
 â”‚    357 - model_path = self._save_artifact(model, scaler, model_type)                                                                                                                                â”‚
 â”‚    358 - self.notify(TrainingEvent.MODEL_SAVED, {"model_path": model_path})                                                                                                                         â”‚
 â”‚    354 + timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')                                                                                                                                       â”‚
 â”‚    355 + with mlflow.start_run(run_name=f"{model_type.value}_{timestamp}") as run:                                                                                                                  â”‚
 â”‚    356 +     run_id = run.info.run_id                                                                                                                                                               â”‚
 â”‚    357 +     self.notify(TrainingEvent.MODEL_SAVED, {"model_path": f"runs:/{run_id}/model"})                                                                                                        â”‚
 â”‚    358                                                                                                                                                                                              â”‚
 â”‚    360 - with mlflow.start_run(run_name=f"{model_type.value}_{datetime.now().strftime('%Y%m%d-%H%M%S')}") as run:                                                                                   â”‚
 â”‚    359       mlflow.log_params(params)                                                                                                                                                              â”‚
 â”‚    360       mlflow.log_metrics(metrics.to_dict())                                                                                                                                                  â”‚
 â”‚    363 -     mlflow.log_artifact(model_path, artifact_path="model_artifact")                                                                                                                        â”‚
 â”‚    364 -     mlflow.register_model(                                                                                                                                                                 â”‚
 â”‚    365 -         model_uri=f"runs:/{run.info.run_id}/model_artifact",                                                                                                                               â”‚
 â”‚    361 +                                                                                                                                                                                            â”‚
 â”‚    362 +     # Log scaler as a separate artifact                                                                                                                                                    â”‚
 â”‚    363 +     scaler_path = "scaler.joblib"                                                                                                                                                          â”‚
 â”‚    364 +     joblib.dump(scaler, scaler_path)                                                                                                                                                       â”‚
 â”‚    365 +     mlflow.log_artifact(scaler_path, artifact_path="scaler")                                                                                                                               â”‚
 â”‚    366 +                                                                                                                                                                                            â”‚
 â”‚    367 +     # Log the model using the sklearn flavor                                                                                                                                               â”‚
 â”‚    368 +     mlflow.sklearn.log_model(sk_model=model, artifact_path="model")                                                                                                                        â”‚
 â”‚    369 +                                                                                                                                                                                            â”‚
 â”‚    370 +     # Register the logged model                                                                                                                                                            â”‚
 â”‚    371 +     model_uri = f"runs:/{run_id}/model"                                                                                                                                                    â”‚
 â”‚    372 +     registered_model = mlflow.register_model(                                                                                                                                              â”‚
 â”‚    373 +         model_uri=model_uri,                                                                                                                                                               â”‚
 â”‚    374           name=f"TrustShield-{model_type.value}"                                                                                                                                             â”‚
 â”‚    375       )                                                                                                                                                                                      â”‚
 â”‚    368 -                                                                                                                                                                                            â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    376       self.notify(TrainingEvent.MLFLOW_LOGGING_COMPLETE, {                                                                                                                                   â”‚
 â”‚    370 -     "model_type": model_type, "model_path": model_path                                                                                                                                     â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    377 +         "model_type": model_type, "model_path": model_uri, "model_version": registered_model.version                                                                                       â”‚
 â”‚    378       })                                                                                                                                                                                     â”‚
 â”‚    379   gc.collect()                                                                                                                                                                               â”‚
 â”‚    380                                                                                                                                                                                              â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A refatoraÃ§Ã£o do mÃ©todo _train_and_log_model foi concluÃ­da. Agora, vou remover o mÃ©todo _save_artifact, que se tornou obsoleto.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Edit Model did not provide valid parameters for edit tool                                                                                                                                        â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    378               })                                                                                                                                                                             â”‚
 â”‚    379           gc.collect()                                                                                                                                                                       â”‚
 â”‚    380                                                                                                                                                                                              â”‚
 â”‚    381 -     # ATUALIZAÃ‡ÃƒO: O mÃ©todo agora salva um dicionÃ¡rio.                                                                                                                                     â”‚
 â”‚    382 -     def _save_artifact(self, model: Any, scaler: Any, model_type: ModelType) -> Path:                                                                                                      â”‚
 â”‚    383 -         timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')                                                                                                                               â”‚
 â”‚    384 -         model_name = f"{model_type.value}_{timestamp}.joblib"                                                                                                                              â”‚
 â”‚    385 -         model_path = self.project_root / 'outputs' / 'models' / model_name                                                                                                                 â”‚
 â”‚    386 -         model_path.parent.mkdir(parents=True, exist_ok=True)                                                                                                                               â”‚
 â”‚    381                                                                                                                                                                                              â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    388 -         artifacts = {                                                                                                                                                                      â”‚
 â”‚    389 -             'model': model,                                                                                                                                                                â”‚
 â”‚    390 -             'scaler': scaler,                                                                                                                                                              â”‚
 â”‚    391 -             'training_timestamp': datetime.now().isoformat()                                                                                                                               â”‚
 â”‚    392 -         }                                                                                                                                                                                  â”‚
 â”‚    382                                                                                                                                                                                              â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    394 -         joblib.dump(artifacts, model_path, compress=3)                                                                                                                                     â”‚
 â”‚    395 -         return model_path                                                                                                                                                                  â”‚
 â”‚    383                                                                                                                                                                                              â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    397 -                                                                                                                                                                                            â”‚
 â”‚    384   # =====================================================================================                                                                                                    â”‚
 â”‚    385   # ðŸš€ PONTO DE ENTRADA DA APLICAÃ‡ÃƒO                                                                                                                                                         â”‚
 â”‚    386   # =====================================================================================                                                                                                    â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ O mÃ©todo _save_artifact foi removido.

  Com esta correÃ§Ã£o, o pipeline de treinamento deve ser concluÃ­do com sucesso. Vou executar a sequÃªncia de comandos novamente.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell make make-dataset && make build-features && make train                                                                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    Creating the dataset...                                                                                                                                                                          â”‚
 â”‚    Command: python /home/trustshield/src/data/make_dataset.py                                                                                                                                       â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/data/make_dataset.py                                                                                  â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:43:24] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:24,862", "level": "INFO", "message": "Pipeline de cria\u00e7\u00e3o de dataset iniciado.", "module": "__main__"}                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:24,862", "level": "INFO", "message": "Iniciando carregamento de dados do diret\u00f3rio: /home/trustshield/data/raw", "module": "__main__"}                      â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:36,494", "level": "INFO", "message": "Dados carregados com sucesso: 13305915 transa\u00e7\u00f5es, 2000 usu\u00e1rios, 109 c\u00f3digos MCC.", "module":         â”‚
 â”‚    "__main__"}                                                                                                                                                                                      â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:36,494", "level": "INFO", "message": "Iniciando valida\u00e7\u00e3o de schema dos dados.", "module": "__main__"}                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:36,494", "level": "INFO", "message": "Valida\u00e7\u00e3o de schema conclu\u00edda com sucesso.", "module": "__main__"}                                          â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:36,494", "level": "INFO", "message": "Iniciando a mesclagem dos datasets de transa\u00e7\u00f5es e usu\u00e1rios.", "module": "__main__"}                        â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:39,650", "level": "INFO", "message": "Mesclagem conclu\u00edda. Dataset final possui 13305915 registros.", "module": "__main__"}                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:39,651", "level": "INFO", "message": "Salvando dataset processado em: /home/trustshield/data/processed", "module": "__main__"}                                   â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:53,244", "level": "INFO", "message": "Dataset salvo com sucesso em /home/trustshield/data/processed/primary_dataset.parquet.", "module": "__main__"}             â”‚
 â”‚    {"timestamp": "2025-08-01 01:43:53,244", "level": "INFO", "message": "Pipeline de cria\u00e7\u00e3o de dataset conclu\u00eddo com sucesso.", "module": "__main__"}                               â”‚
 â”‚    ðŸ› ï¸  Executando a engenharia de features no ambiente unificado...                                                                                                                                â”‚
 â”‚       Comando: python /home/trustshield/src/features/build_features.py                                                                                                                              â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/features/build_features.py                                                                            â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:43:55] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    2025-08-01 01:43:56,068 - [TrustShield] - INFO - ðŸš€ Pipeline de engenharia de features iniciado.                                                                                                 â”‚
 â”‚    2025-08-01 01:43:56,068 - [TrustShield] - INFO - Carregando dados de /home/trustshield/data/processed/primary_dataset.parquet                                                                    â”‚
 â”‚    2025-08-01 01:44:00,745 - [TrustShield] - INFO - Iniciando limpeza de dados...                                                                                                                   â”‚
 â”‚    2025-08-01 01:44:31,055 - [TrustShield] - INFO - Limpeza de dados concluÃ­da.                                                                                                                     â”‚
 â”‚    2025-08-01 01:44:31,055 - [TrustShield] - INFO - Iniciando engenharia de features...                                                                                                             â”‚
 â”‚    2025-08-01 01:44:32,095 - [TrustShield] - INFO - Engenharia de features concluÃ­da.                                                                                                               â”‚
 â”‚    2025-08-01 01:44:32,095 - [TrustShield] - INFO - Salvando dataset com features em /home/trustshield/data/features/featured_dataset.parquet                                                       â”‚
 â”‚    2025-08-01 01:44:43,000 - [TrustShield] - INFO - âœ… Pipeline de engenharia de features concluÃ­do com sucesso.                                                                                     â”‚
 â”‚    ðŸ§  Executando o pipeline de treino no ambiente unificado...                                                                                                                                      â”‚
 â”‚       Comando: python /home/trustshield/src/models/train_fraud_model.py --model isolation_forest                                                                                                    â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/models/train_fraud_model.py --model isolation_forest                                                  â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:44:45] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    âŒ ERRO CRÃTICO: name 'MLflowObserver' is not defined                                                                                                                                             â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    make: *** [Makefile:65: train] Erro 1                                                                                                                                                            â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A anÃ¡lise da Ãºltima execuÃ§Ã£o revela o erro name 'MLflowObserver' is not defined. Este erro ocorreu porque, ao remover a classe MLflowObserver, esqueci de remover a linha que a anexa ao Subject no
  construtor da classe AdvancedTrustShieldTrainer.

  Para corrigir isso, vou remover a linha self.attach(MLflowObserver(self.config.get('mlflow', {}).get('experiment_name', 'TrustShield'), config_path)) do arquivo src/models/train_fraud_model.py.

  Vou aplicar esta correÃ§Ã£o.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Edit src/models/train_fraud_model.py:         self.attach(ConsoleLog... =>         self.attach(ConsoleLog...                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    300       self.logger = AdvancedLogger('TrustShield')                                                                                                                                            â”‚
 â”‚    301       self.data_repository = ParquetDataRepository(self.config, self.project_root, use_dask=self.use_dask)                                                                                   â”‚
 â”‚    302       self.attach(ConsoleLogObserver(self.logger))                                                                                                                                           â”‚
 â”‚    303 -     self.attach(MLflowObserver(self.config.get('mlflow', {}).get('experiment_name', 'TrustShield'), config_path))                                                                          â”‚
 â”‚    303       self._setup_environment()                                                                                                                                                              â”‚
 â”‚    304                                                                                                                                                                                              â”‚
 â”‚    305   def _load_and_validate_config(self, config_path: str) -> Dict[str, Any]:                                                                                                                   â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A linha que anexa o MLflowObserver foi removida.

  Com esta correÃ§Ã£o, o pipeline de treinamento deve ser concluÃ­do com sucesso. Vou executar a sequÃªncia de comandos novamente.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell make make-dataset && make build-features && make train                                                                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    Creating the dataset...                                                                                                                                                                          â”‚
 â”‚    Command: python /home/trustshield/src/data/make_dataset.py                                                                                                                                       â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/data/make_dataset.py                                                                                  â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:45:03] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:04,498", "level": "INFO", "message": "Pipeline de cria\u00e7\u00e3o de dataset iniciado.", "module": "__main__"}                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:04,499", "level": "INFO", "message": "Iniciando carregamento de dados do diret\u00f3rio: /home/trustshield/data/raw", "module": "__main__"}                      â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:16,021", "level": "INFO", "message": "Dados carregados com sucesso: 13305915 transa\u00e7\u00f5es, 2000 usu\u00e1rios, 109 c\u00f3digos MCC.", "module":         â”‚
 â”‚    "__main__"}                                                                                                                                                                                      â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:16,021", "level": "INFO", "message": "Iniciando valida\u00e7\u00e3o de schema dos dados.", "module": "__main__"}                                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:16,021", "level": "INFO", "message": "Valida\u00e7\u00e3o de schema conclu\u00edda com sucesso.", "module": "__main__"}                                          â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:16,021", "level": "INFO", "message": "Iniciando a mesclagem dos datasets de transa\u00e7\u00f5es e usu\u00e1rios.", "module": "__main__"}                        â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:19,040", "level": "INFO", "message": "Mesclagem conclu\u00edda. Dataset final possui 13305915 registros.", "module": "__main__"}                                 â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:19,040", "level": "INFO", "message": "Salvando dataset processado em: /home/trustshield/data/processed", "module": "__main__"}                                   â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:32,373", "level": "INFO", "message": "Dataset salvo com sucesso em /home/trustshield/data/processed/primary_dataset.parquet.", "module": "__main__"}             â”‚
 â”‚    {"timestamp": "2025-08-01 01:45:32,374", "level": "INFO", "message": "Pipeline de cria\u00e7\u00e3o de dataset conclu\u00eddo com sucesso.", "module": "__main__"}                               â”‚
 â”‚    ðŸ› ï¸  Executando a engenharia de features no ambiente unificado...                                                                                                                                â”‚
 â”‚       Comando: python /home/trustshield/src/features/build_features.py                                                                                                                              â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/features/build_features.py                                                                            â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:45:34] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    2025-08-01 01:45:34,985 - [TrustShield] - INFO - ðŸš€ Pipeline de engenharia de features iniciado.                                                                                                 â”‚
 â”‚    2025-08-01 01:45:34,985 - [TrustShield] - INFO - Carregando dados de /home/trustshield/data/processed/primary_dataset.parquet                                                                    â”‚
 â”‚    2025-08-01 01:45:39,574 - [TrustShield] - INFO - Iniciando limpeza de dados...                                                                                                                   â”‚
 â”‚    2025-08-01 01:46:08,101 - [TrustShield] - INFO - Limpeza de dados concluÃ­da.                                                                                                                     â”‚
 â”‚    2025-08-01 01:46:08,101 - [TrustShield] - INFO - Iniciando engenharia de features...                                                                                                             â”‚
 â”‚    2025-08-01 01:46:09,072 - [TrustShield] - INFO - Engenharia de features concluÃ­da.                                                                                                               â”‚
 â”‚    2025-08-01 01:46:09,072 - [TrustShield] - INFO - Salvando dataset com features em /home/trustshield/data/features/featured_dataset.parquet                                                       â”‚
 â”‚    2025-08-01 01:46:19,645 - [TrustShield] - INFO - âœ… Pipeline de engenharia de features concluÃ­do com sucesso.                                                                                     â”‚
 â”‚    ðŸ§  Executando o pipeline de treino no ambiente unificado...                                                                                                                                      â”‚
 â”‚       Comando: python /home/trustshield/src/models/train_fraud_model.py --model isolation_forest                                                                                                    â”‚
 â”‚    docker compose -f docker-compose.yml run --rm trustshield-api python /home/trustshield/src/models/train_fraud_model.py --model isolation_forest                                                  â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                                                 â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                                         â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                                              â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                                    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                                          â”‚
 â”‚    [2025-08-01 01:46:21] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                                                 â”‚
 â”‚    2025-08-01 01:46:23,615 - [TrustShield-Trainer] - INFO - ðŸš€ === INICIANDO PIPELINE DE TREINO (ID: bde27823) ===                                                                                  â”‚
 â”‚    2025-08-01 01:46:23,616 - [TrustShield-Trainer] - INFO - ðŸ“ Carregando e preparando dados...                                                                                                     â”‚
 â”‚    2025-08-01 01:46:26,895 - [TrustShield-Trainer] - INFO - âœ… Dados prontos: 113,100 para treino, 19,959 para teste.                                                                                â”‚
 â”‚    2025-08-01 01:46:26,895 - [TrustShield-Trainer] - INFO -                                                                                                                                         â”‚
 â”‚    ============================================================                                                                                                                                     â”‚
 â”‚    ðŸŽ¯ TREINANDO MODELO: ISOLATION_FOREST                                                                                                                                                            â”‚
 â”‚    ============================================================                                                                                                                                     â”‚
 â”‚    2025-08-01 01:46:28,093 - [TrustShield-Trainer] - INFO - âœ… Modelo isolation_forest treinado com sucesso.                                                                                         â”‚
 â”‚    2025-08-01 01:46:28,340 - [TrustShield-Trainer] - INFO - ðŸ“Š MÃ©tricas: Anomalias=0.0985 | InferÃªncia=143.3ms | CPU=39.0%                                                                          â”‚
 â”‚    2025-08-01 01:46:28,393 - [TrustShield-Trainer] - INFO - ðŸ’¾ Artefato completo (modelo + scaler) salvo em: runs:/e588eea92b1c4dbf8935eba3af1882ba/model                                           â”‚
 â”‚    ðŸƒ View run isolation_forest_20250801_014628 at: http://mlflow:5000/#/experiments/1/runs/e588eea92b1c4dbf8935eba3af1882ba                                                                        â”‚
 â”‚    ðŸ§ª View experiment at: http://mlflow:5000/#/experiments/1                                                                                                                                        â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚     Container trustshield-minio  Running                                                                                                                                                            â”‚
 â”‚     Container trustshield-postgres  Running                                                                                                                                                         â”‚
 â”‚     Container trustshield-mlflow  Running                                                                                                                                                           â”‚
 â”‚     Container trustshield-minio  Waiting                                                                                                                                                            â”‚
 â”‚     Container trustshield-minio  Healthy                                                                                                                                                            â”‚
 â”‚     Container trustshield-create-buckets-1  Starting                                                                                                                                                â”‚
 â”‚     Container trustshield-create-buckets-1  Started                                                                                                                                                 â”‚
 â”‚     Container trustshield-create-buckets-1  Waiting                                                                                                                                                 â”‚
 â”‚     Container trustshield-postgres  Waiting                                                                                                                                                         â”‚
 â”‚     Container trustshield-postgres  Healthy                                                                                                                                                         â”‚
 â”‚     Container trustshield-create-buckets-1  Exited                                                                                                                                                  â”‚
 â”‚    2025/08/01 01:46:28 WARNING mlflow.utils.git_utils: Failed to import Git (the Git executable is probably not on your PATH), so Git SHA is not available. Error: Failed to initialize: Bad git    â”‚
 â”‚    executable.                                                                                                                                                                                      â”‚
 â”‚    The git executable must be specified in one of the following ways:                                                                                                                               â”‚
 â”‚        - be included in your $PATH                                                                                                                                                                  â”‚
 â”‚        - be set via $GIT_PYTHON_GIT_EXECUTABLE                                                                                                                                                      â”‚
 â”‚        - explicitly set via git.refresh(<full-path-to-git-executable>)                                                                                                                              â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    All git commands will error until this is rectified.                                                                                                                                             â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    This initial message can be silenced or aggravated in the future by setting the                                                                                                                  â”‚
 â”‚    $GIT_PYTHON_REFRESH environment variable. Use one of the following values:                                                                                                                       â”‚
 â”‚        - quiet|q|silence|s|silent|none|n|0: for no message or exception                                                                                                                             â”‚
 â”‚        - warn|w|warning|log|l|1: for a warning message (logging level CRITICAL, displayed by default)                                                                                               â”‚
 â”‚        - error|e|exception|raise|r|2: for a raised exception                                                                                                                                        â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    Example:                                                                                                                                                                                         â”‚
 â”‚        export GIT_PYTHON_REFRESH=quiet                                                                                                                                                              â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    2025/08/01 01:46:28 WARNING mlflow.models.model: `artifact_path` is deprecated. Please use `name` instead.                                                                                       â”‚
 â”‚    2025/08/01 01:46:31 WARNING mlflow.models.model: Model logged without a signature and input example. Please set `input_example` parameter when logging the model to auto infer the model         â”‚
 â”‚    signature.                                                                                                                                                                                       â”‚
 â”‚    Registered model 'TrustShield-isolation_forest' already exists. Creating a new version of this model...                                                                                          â”‚
 â”‚    2025/08/01 01:46:31 WARNING mlflow.tracking._model_registry.fluent: Run with id e588eea92b1c4dbf8935eba3af1882ba has no artifacts at artifact path 'model', registering model based on           â”‚
 â”‚    models:/m-8d791f4a890c42cd9b3273b78f978919 instead                                                                                                                                               â”‚
 â”‚    2025/08/01 01:46:31 INFO mlflow.store.model_registry.abstract_store: Waiting up to 300 seconds for model version to finish creation. Model name: TrustShield-isolation_forest, version 1         â”‚
 â”‚    Created version '1' of model 'TrustShield-isolation_forest'.                                                                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ Excelente! A Ãºltima execuÃ§Ã£o do pipeline foi um sucesso.

  Todos os erros anteriores foram resolvidos. O pipeline completo, desde a criaÃ§Ã£o do dataset atÃ© o treinamento e registro do modelo no MLflow, foi executado sem falhas.

  O modelo isolation_forest foi treinado e uma nova versÃ£o foi registrada com sucesso no MLflow, como indicado pelos logs.

  O que vocÃª gostaria de fazer agora?

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  > Verificar a situaÃ§Ã£o do LocalHost  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

âœ¦ Para verificar o status dos serviÃ§os rodando localmente, vou usar o comando docker compose ps. Ele mostrarÃ¡ todos os contÃªineres gerenciados pelo docker-compose.yml, seus status e as portas que estÃ£o
  usando.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose ps (Verifica o status dos contÃªineres Docker gerenciados pelo Docker Compose, mostrando quais serviÃ§os estÃ£o em execuÃ§Ã£o e em quais portas.)                                â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    NAME                   IMAGE                         COMMAND                  SERVICE           CREATED        STATUS                    PORTS                                                   â”‚
 â”‚    trustshield-api        trustshield-trustshield-api   "/usr/local/bin/entrâ€¦"   trustshield-api   20 hours ago   Up 20 hours (unhealthy)   0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp             â”‚
 â”‚    trustshield-minio      minio/minio:latest            "/usr/bin/docker-entâ€¦"   minio             20 hours ago   Up 20 hours (healthy)     0.0.0.0:9000-9001->9000-9001/tcp,                       â”‚
 â”‚    [::]:9000-9001->9000-9001/tcp                                                                                                                                                                    â”‚
 â”‚    trustshield-mlflow     trustshield-mlflow            "mlflow server --hosâ€¦"   mlflow            20 hours ago   Up 20 hours               0.0.0.0:5000->5000/tcp, [::]:5000->5000/tcp             â”‚
 â”‚    trustshield-postgres   postgres:13.12                "docker-entrypoint.sâ€¦"   postgres          20 hours ago   Up 20 hours (healthy)     0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp             â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A saÃ­da do comando docker compose ps mostra que todos os serviÃ§os essenciais estÃ£o em execuÃ§Ã£o:

   * `trustshield-api`: O serviÃ§o da API estÃ¡ rodando, mas com o status unhealthy. Isso indica que, embora o contÃªiner esteja ativo, a aplicaÃ§Ã£o dentro dele nÃ£o estÃ¡ respondendo corretamente Ã s verificaÃ§Ãµes
     de saÃºde. Isso pode ser um problema temporÃ¡rio ou indicar uma falha na inicializaÃ§Ã£o da API.
   * `trustshield-minio`: O MinIO (armazenamento de objetos) estÃ¡ rodando e healthy.
   * `trustshield-mlflow`: O MLflow (plataforma de MLOps) estÃ¡ rodando.
   * `trustshield-postgres`: O banco de dados PostgreSQL estÃ¡ rodando e healthy.

  O ponto de atenÃ§Ã£o Ã© o status unhealthy do serviÃ§o trustshield-api. Vou investigar os logs deste serviÃ§o para entender a causa do problema.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose logs trustshield-api (Exibe os logs do contÃªiner trustshield-api para diagnosticar o motivo do status 'unhealthy'.)                                                         â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                              â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                      â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                      â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                           â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                 â”‚
 â”‚    trustshield-api  | .                                                                                                                                                                             â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:28] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                       â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:28] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                              â”‚
 â”‚    trustshield-api  | INFO:     Started server process [1]                                                                                                                                          â”‚
 â”‚    trustshield-api  | INFO:     Waiting for application startup.                                                                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,810 - trustshield_api - INFO - Iniciando ciclo de vida da API...                                                                                          â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - [TrustShield-Predictor] - ERROR - âŒ Falha na detecÃ§Ã£o automÃ¡tica de caminhos: Nenhum modelo encontrado no diretÃ³rio:                                â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - TrustShieldPredictor - ERROR - âŒ Falha na detecÃ§Ã£o automÃ¡tica de caminhos: Nenhum modelo encontrado no diretÃ³rio:                                   â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - [TrustShield-Predictor] - CRITICAL - âŒ Erro crÃ­tico na inicializaÃ§Ã£o do preditor: Nenhum modelo encontrado no diretÃ³rio:                            â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - TrustShieldPredictor - CRITICAL - âŒ Erro crÃ­tico na inicializaÃ§Ã£o do preditor: Nenhum modelo encontrado no diretÃ³rio:                               â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,812 - trustshield_api - CRITICAL - Falha crÃ­tica ao carregar o modelo na inicializaÃ§Ã£o: Nenhum modelo encontrado no diretÃ³rio:                            â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/api/main.py", line 43, in lifespan                                                                                                              â”‚
 â”‚    trustshield-api  |     app.state.predictor = TrustShieldPredictor()                                                                                                                              â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | INFO:     Application startup complete.                                                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:53170 - "GET / HTTP/1.1" 404 Not Found                                                                                                                   â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:53172 - "GET /favicon.ico HTTP/1.1" 404 Not Found                                                                                                        â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:37818 - "GET / HTTP/1.1" 404 Not Found                                                                                                                   â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:37828 - "GET /favicon.ico HTTP/1.1" 404 Not Found                                                                                                        â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A anÃ¡lise dos logs do contÃªiner trustshield-api revela a causa do status unhealthy:

  FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models

  Este erro ocorre porque a API, ao ser iniciada, tenta carregar o modelo treinado do diretÃ³rio /home/trustshield/outputs/models, mas nÃ£o encontra nenhum arquivo de modelo. Isso acontece porque o modelo Ã©
  salvo com um nome de arquivo que inclui um timestamp, e a API nÃ£o sabe qual Ã© o nome do arquivo mais recente.

  Para resolver isso, vou modificar o script src/models/predict.py para que ele encontre o arquivo de modelo mais recente no diretÃ³rio outputs/models e o carregue.

  CorreÃ§Ã£o Proposta:

  Vou modificar a funÃ§Ã£o _auto_detect_paths no script src/models/predict.py para que ela encontre o arquivo de modelo mais recente no diretÃ³rio outputs/models.

  Vou aplicar esta correÃ§Ã£o.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Edit src/models/predict.py:     def _auto_detect_paths(sel... =>     def _auto_detect_paths(sel...                                                                                               â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    149       except Exception as e:                                                                                                                                                                 â”‚
 â”‚    150           self.logger.warning(f"âš ï¸ NÃ£o foi possÃ­vel obter informaÃ§Ãµes detalhadas do sistema: {e}")                                                                                           â”‚
 â”‚    151                                                                                                                                                                                              â”‚
 â”‚    152 - def _auto_detect_paths(self) -> Path:                                                                                                                                                      â”‚
 â”‚    153 -     """Detecta automaticamente o caminho do modelo mais recente."""                                                                                                                        â”‚
 â”‚    154 -     try:                                                                                                                                                                                   â”‚
 â”‚    155 -         project_root = Path(__file__).resolve().parents[2]                                                                                                                                 â”‚
 â”‚    156 -         model_dir = project_root / "outputs" / "models"                                                                                                                                    â”‚
 â”‚    152 + def _auto_detect_paths(self) -> str:                                                                                                                                                       â”‚
 â”‚    153 +     model_dir = Path("/home/trustshield/outputs/models")                                                                                                                                   â”‚
 â”‚    154 +     if not model_dir.exists():                                                                                                                                                             â”‚
 â”‚    155 +         raise FileNotFoundError(f"DiretÃ³rio de modelos nÃ£o encontrado: {model_dir}")                                                                                                       â”‚
 â”‚    156                                                                                                                                                                                              â”‚
 â”‚    158 -         # Prioriza modelos 'isolation_forest' e depois busca o mais recente                                                                                                                â”‚
 â”‚    159 -         model_patterns = ["*isolation_forest*.joblib", "*.joblib"]                                                                                                                         â”‚
 â”‚    160 -         latest_model = None                                                                                                                                                                â”‚
 â”‚    157 +     latest_model = max(model_dir.glob("*.joblib"), key=lambda p: p.stat().st_mtime, default=None)                                                                                          â”‚
 â”‚    158                                                                                                                                                                                              â”‚
 â”‚    162 -         for pattern in model_patterns:                                                                                                                                                     â”‚
 â”‚    163 -             models = list(model_dir.glob(pattern))                                                                                                                                         â”‚
 â”‚    164 -             if models:                                                                                                                                                                     â”‚
 â”‚    165 -                 latest_model = max(models, key=lambda p: p.stat().st_mtime)                                                                                                                â”‚
 â”‚    166 -                 self.logger.info(f"ðŸ“ Modelo detectado automaticamente: {latest_model.name}")                                                                                              â”‚
 â”‚    167 -                 return latest_model                                                                                                                                                        â”‚
 â”‚    168 -                                                                                                                                                                                            â”‚
 â”‚    159 +     if not latest_model:                                                                                                                                                                   â”‚
 â”‚    160           raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                                     â”‚
 â”‚    161                                                                                                                                                                                              â”‚
 â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
 â”‚    171 -     except Exception as e:                                                                                                                                                                 â”‚
 â”‚    172 -         self.logger.error(f"âŒ Falha na detecÃ§Ã£o automÃ¡tica de caminhos:  {e}")                                                                                                             â”‚
 â”‚    173 -         raise                                                                                                                                                                              â”‚
 â”‚    162 +     return str(latest_model)                                                                                                                                                               â”‚
 â”‚    163                                                                                                                                                                                              â”‚
 â”‚    164   def _load_artifacts(self):                                                                                                                                                                 â”‚
 â”‚    165       """                                                                                                                                                                                    â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A funÃ§Ã£o _auto_detect_paths foi modificada para encontrar o arquivo de modelo mais recente.

  Agora, vou reiniciar o serviÃ§o da API para que ele carregue o modelo mais recente e se torne saudÃ¡vel.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose restart trustshield-api (Reinicia o serviÃ§o da API para que ele carregue o modelo mais recente e se torne saudÃ¡vel.)                                                        â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚     Container trustshield-api  Restarting                                                                                                                                                           â”‚
 â”‚     Container trustshield-api  Started                                                                                                                                                              â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ O serviÃ§o trustshield-api foi reiniciado. Agora, vou verificar o status dos serviÃ§os novamente para confirmar que a API estÃ¡ saudÃ¡vel.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose ps (Verifica o status dos contÃªineres Docker para confirmar que a API estÃ¡ saudÃ¡vel.)                                                                                       â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    NAME                   IMAGE                         COMMAND                  SERVICE           CREATED        STATUS                            PORTS                                           â”‚
 â”‚    trustshield-api        trustshield-trustshield-api   "/usr/local/bin/entrâ€¦"   trustshield-api   20 hours ago   Up 7 seconds (health: starting)   0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp     â”‚
 â”‚    trustshield-minio      minio/minio:latest            "/usr/bin/docker-entâ€¦"   minio             20 hours ago   Up 20 hours (healthy)             0.0.0.0:9000-9001->9000-9001/tcp,               â”‚
 â”‚    [::]:9000-9001->9000-9001/tcp                                                                                                                                                                    â”‚
 â”‚    trustshield-mlflow     trustshield-mlflow            "mlflow server --hosâ€¦"   mlflow            20 hours ago   Up 20 hours                       0.0.0.0:5000->5000/tcp, [::]:5000->5000/tcp     â”‚
 â”‚    trustshield-postgres   postgres:13.12                "docker-entrypoint.sâ€¦"   postgres          20 hours ago   Up 20 hours (healthy)             0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp     â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A saÃ­da do comando docker compose ps mostra que o serviÃ§o trustshield-api estÃ¡ com o status health: starting. Isso significa que o contÃªiner foi reiniciado e a verificaÃ§Ã£o de saÃºde estÃ¡ em andamento.

  Vou aguardar alguns segundos e verificar o status novamente para confirmar que a API se tornou saudÃ¡vel.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell sleep 5 && docker compose ps (Aguarda 5 segundos e verifica o status dos contÃªineres Docker novamente para confirmar que a API estÃ¡ saudÃ¡vel.)                                             â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    NAME                   IMAGE                         COMMAND                  SERVICE           CREATED        STATUS                             PORTS                                          â”‚
 â”‚    trustshield-api        trustshield-trustshield-api   "/usr/local/bin/entrâ€¦"   trustshield-api   20 hours ago   Up 47 seconds (health: starting)   0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp    â”‚
 â”‚    trustshield-minio      minio/minio:latest            "/usr/bin/docker-entâ€¦"   minio             20 hours ago   Up 20 hours (healthy)              0.0.0.0:9000-9001->9000-9001/tcp,              â”‚
 â”‚    [::]:9000-9001->9000-9001/tcp                                                                                                                                                                    â”‚
 â”‚    trustshield-mlflow     trustshield-mlflow            "mlflow server --hosâ€¦"   mlflow            20 hours ago   Up 20 hours                        0.0.0.0:5000->5000/tcp, [::]:5000->5000/tcp    â”‚
 â”‚    trustshield-postgres   postgres:13.12                "docker-entrypoint.sâ€¦"   postgres          20 hours ago   Up 20 hours (healthy)              0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp    â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A saÃ­da do comando docker compose ps ainda mostra o serviÃ§o trustshield-api com o status health: starting. Isso pode indicar que a aplicaÃ§Ã£o estÃ¡ demorando mais do que o esperado para iniciar ou que ainda
  hÃ¡ um problema.

  Vou verificar os logs do serviÃ§o trustshield-api novamente para ver se hÃ¡ alguma nova mensagem de erro.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose logs trustshield-api (Exibe os logs do contÃªiner trustshield-api para diagnosticar o motivo do status 'health: starting'.)                                                  â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                              â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                      â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                      â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                           â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:26] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                 â”‚
 â”‚    trustshield-api  | .                                                                                                                                                                             â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:28] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                       â”‚
 â”‚    trustshield-api  | [2025-07-31 05:23:28] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                              â”‚
 â”‚    trustshield-api  | INFO:     Started server process [1]                                                                                                                                          â”‚
 â”‚    trustshield-api  | INFO:     Waiting for application startup.                                                                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,810 - trustshield_api - INFO - Iniciando ciclo de vida da API...                                                                                          â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - [TrustShield-Predictor] - ERROR - âŒ Falha na detecÃ§Ã£o automÃ¡tica de caminhos: Nenhum modelo encontrado no diretÃ³rio:                                â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - TrustShieldPredictor - ERROR - âŒ Falha na detecÃ§Ã£o automÃ¡tica de caminhos: Nenhum modelo encontrado no diretÃ³rio:                                   â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - [TrustShield-Predictor] - CRITICAL - âŒ Erro crÃ­tico na inicializaÃ§Ã£o do preditor: Nenhum modelo encontrado no diretÃ³rio:                            â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,811 - TrustShieldPredictor - CRITICAL - âŒ Erro crÃ­tico na inicializaÃ§Ã£o do preditor: Nenhum modelo encontrado no diretÃ³rio:                               â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | 2025-07-31 05:23:29,812 - trustshield_api - CRITICAL - Falha crÃ­tica ao carregar o modelo na inicializaÃ§Ã£o: Nenhum modelo encontrado no diretÃ³rio:                            â”‚
 â”‚    /home/trustshield/outputs/models                                                                                                                                                                 â”‚
 â”‚    trustshield-api  | Traceback (most recent call last):                                                                                                                                            â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/api/main.py", line 43, in lifespan                                                                                                              â”‚
 â”‚    trustshield-api  |     app.state.predictor = TrustShieldPredictor()                                                                                                                              â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 117, in __init__                                                                                                       â”‚
 â”‚    trustshield-api  |     self.model_path = model_path or self._auto_detect_paths()                                                                                                                 â”‚
 â”‚    trustshield-api  |   File "/home/trustshield/src/models/predict.py", line 169, in _auto_detect_paths                                                                                             â”‚
 â”‚    trustshield-api  |     raise FileNotFoundError(f"Nenhum modelo encontrado no diretÃ³rio: {model_dir}")                                                                                            â”‚
 â”‚    trustshield-api  | FileNotFoundError: Nenhum modelo encontrado no diretÃ³rio: /home/trustshield/outputs/models                                                                                    â”‚
 â”‚    trustshield-api  | INFO:     Application startup complete.                                                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:53170 - "GET / HTTP/1.1" 404 Not Found                                                                                                                   â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:53172 - "GET /favicon.ico HTTP/1.1" 404 Not Found                                                                                                        â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:37818 - "GET / HTTP/1.1" 404 Not Found                                                                                                                   â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:37828 - "GET /favicon.ico HTTP/1.1" 404 Not Found                                                                                                        â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:42698 - "GET / HTTP/1.1" 404 Not Found                                                                                                                   â”‚
 â”‚    trustshield-api  | INFO:     172.18.0.1:42702 - "GET /favicon.ico HTTP/1.1" 404 Not Found                                                                                                        â”‚
 â”‚    trustshield-api  | INFO:     Shutting down                                                                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     Waiting for application shutdown.                                                                                                                                   â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:02,111 - trustshield_api - INFO - Encerrando ciclo de vida da API e limpando recursos...                                                                     â”‚
 â”‚    trustshield-api  | INFO:     Application shutdown complete.                                                                                                                                      â”‚
 â”‚    trustshield-api  | INFO:     Finished server process [1]                                                                                                                                         â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: PostgreSQL em postgres:5432...                                                                              â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: ServiÃ§o PostgreSQL estÃ¡ pronto!                                                                                                      â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MinIO em minio:9000...                                                                                      â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: ServiÃ§o MinIO estÃ¡ pronto!                                                                                                           â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: Aguardando pelo serviÃ§o: MLflow UI em mlflow:5000...                                                                                 â”‚
 â”‚    trustshield-api  |                                                                                                                                                                               â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: ServiÃ§o MLflow UI estÃ¡ pronto!                                                                                                       â”‚
 â”‚    trustshield-api  | [2025-08-01 01:48:02] [ENTRYPOINT] INFO: Todos os serviÃ§os estÃ£o operacionais. Executando o comando principal...                                                              â”‚
 â”‚    trustshield-api  | INFO:     Started server process [1]                                                                                                                                          â”‚
 â”‚    trustshield-api  | INFO:     Waiting for application startup.                                                                                                                                    â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,772 - trustshield_api - INFO - Iniciando ciclo de vida da API...                                                                                          â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - [TrustShield-Predictor] - INFO - ============================================================                                                       â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - [TrustShield-Predictor] - INFO - ðŸš€ INICIALIZANDO MOTOR DE INFERÃŠNCIA DE PRODUÃ‡ÃƒO                                                                   â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - TrustShieldPredictor - INFO - ============================================================                                                          â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - TrustShieldPredictor - INFO - ðŸš€ INICIALIZANDO MOTOR DE INFERÃŠNCIA DE PRODUÃ‡ÃƒO                                                                      â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - [TrustShield-Predictor] - INFO - ðŸ’» CPUs: 2 cores fÃ­sicos @ 3230.22675 MHz                                                                          â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,773 - TrustShieldPredictor - INFO - ðŸ’» CPUs: 2 cores fÃ­sicos @ 3230.22675 MHz                                                                             â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - [TrustShield-Predictor] - INFO - ðŸ§  RAM Total: 19.3 GB                                                                                              â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - TrustShieldPredictor - INFO - ðŸ§  RAM Total: 19.3 GB                                                                                                 â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - [TrustShield-Predictor] - INFO - âš™ï¸ Threads Otimizadas: 4 (Intel MKL/OMP)                                                                           â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - TrustShieldPredictor - INFO - âš™ï¸ Threads Otimizadas: 4 (Intel MKL/OMP)                                                                              â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - [TrustShield-Predictor] - INFO - ============================================================                                                       â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - TrustShieldPredictor - INFO - ============================================================                                                          â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - [TrustShield-Predictor] - INFO - ðŸ“¥ Carregando artefatos de: /home/trustshield/outputs/models/isolation_forest_20250801_002239.joblib               â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:03,774 - TrustShieldPredictor - INFO - ðŸ“¥ Carregando artefatos de: /home/trustshield/outputs/models/isolation_forest_20250801_002239.joblib                  â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - [TrustShield-Predictor] - INFO - âœ… Artefatos carregados em 0.49s | Tipo: IsolationForest                                                            â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - [TrustShield-Predictor] - INFO - ðŸŽ¯ Modelo treinado com 24 features exatas.                                                                         â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - [TrustShield-Predictor] - INFO - ðŸŽ¯ Motor de InferÃªncia TrustShield inicializado com sucesso!                                                       â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - TrustShieldPredictor - INFO - âœ… Artefatos carregados em 0.49s | Tipo: IsolationForest                                                               â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - TrustShieldPredictor - INFO - ðŸŽ¯ Modelo treinado com 24 features exatas.                                                                            â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - TrustShieldPredictor - INFO - ðŸŽ¯ Motor de InferÃªncia TrustShield inicializado com sucesso!                                                          â”‚
 â”‚    trustshield-api  | 2025-08-01 01:48:04,263 - trustshield_api - INFO - Motor de inferÃªncia carregado com sucesso no estado da aplicaÃ§Ã£o.                                                          â”‚
 â”‚    trustshield-api  | INFO:     Application startup complete.                                                                                                                                       â”‚
 â”‚    trustshield-api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)                                                                                                       â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
âœ¦ A anÃ¡lise dos logs do contÃªiner trustshield-api mostra que o problema foi resolvido. A API agora estÃ¡ sendo iniciada com sucesso e o motor de inferÃªncia estÃ¡ sendo carregado corretamente.

  O status health: starting que vimos anteriormente era devido ao tempo que a API leva para iniciar e carregar o modelo. Agora que a API estÃ¡ em execuÃ§Ã£o, o status deve ser healthy.

  Vou verificar o status dos serviÃ§os novamente para confirmar que a API estÃ¡ saudÃ¡vel.
 â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
 â”‚ âœ”  Shell docker compose ps (Verifica o status dos contÃªineres Docker para confirmar que a API estÃ¡ saudÃ¡vel.)                                                                                       â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â”‚    NAME                   IMAGE                         COMMAND                  SERVICE           CREATED        STATUS                                 PORTS                                      â”‚
 â”‚    trustshield-api        trustshield-trustshield-api   "/usr/local/bin/entrâ€¦"   trustshield-api   20 hours ago   Up About a minute (health: starting)   0.0.0.0:8000->8000/tcp,                    â”‚
 â”‚    [::]:8000->8000/tcp                                                                                                                                                                              â”‚
 â”‚    trustshield-minio      minio/minio:latest            "/usr/bin/docker-entâ€¦"   minio             20 hours ago   Up 20 hours (healthy)                  0.0.0.0:9000-9001->9000-9001/tcp,          â”‚
 â”‚    [::]:9000-9001->9000-9001/tcp                                                                                                                                                                    â”‚
 â”‚    trustshield-mlflow     trustshield-mlflow            "mlflow server --hosâ€¦"   mlflow            20 hours ago   Up 20 hours                            0.0.0.0:5000->5000/tcp,                    â”‚
 â”‚    [::]:5000->5000/tcp                                                                                                                                                                              â”‚
 â”‚    trustshield-postgres   postgres:13.12                "docker-entrypoint.sâ€¦"   postgres          20 hours ago   Up 20 hours (healthy)                  0.0.0.0:5432->5432/tcp,                    â”‚
 â”‚    [::]:5432->5432/tcp                                                                                                                                                                              â”‚
 â”‚                                                                                                                                                                                                     â”‚
 â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
